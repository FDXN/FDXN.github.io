<!DOCTYPE html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="FDXN" />
	
	<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
	
	
	
	<title>关于为了一个远程桌面忙忙碌碌开了乱七八糟各种东西这回事儿 ｜ 黄粱一梦</title>
	
    
    
    <meta name="description" content="现在是7月20号，7月中旬的最后一天，距离上次更新博客已有两个半月，期间也不是没有做些事情，只是做了但是要么没做成，要么就根本没啥用。 感觉我最近写的越来越像流水账了，像小学生作文一样，今天把图床换成了" />
    

    
    
    <meta name="keywords" content="记录" />
    

	
    
    <link rel="shortcut icon" href="https://FDXN.github.io/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://FDXN.github.iocss/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://FDXN.github.io/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://FDXN.github.io/css/highlight.css" />

    
    
</head>

<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/tags/">Tags</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://FDXN.github.io">
                    <span>黄粱一梦</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">正因是梦，尤需真活。</p>
            <div class="my_socials">
                
                
                <a href="https://space.bilibili.com/8346968" title="bilibili" target="_blank"><i class="ri-bilibili-fill"></i></a>
                
                
                
                <a href="https://github.com/FDXN" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1005279543&amp;site=qq&amp;menu=yes" title="qq" target="_blank"><i class="ri-qq-fill"></i></a>
                
                
                <a href="https://FDXN.github.io/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/ipv6rd/'>关于为了一个远程桌面忙忙碌碌开了乱七八糟各种东西这回事儿</a></h2>
                        <span class="date">2022.07.20</span>
                    </div>
                    <div class="post_content markdown"><p>现在是7月20号，7月中旬的最后一天，距离上次更新博客已有两个半月，期间也不是没有做些事情，只是做了但是要么没做成，要么就根本没啥用。</p>
<p>感觉我最近写的越来越像流水账了，像小学生作文一样，今天把图床换成了阿里云，很开心，今天给博客套了一层cdn，速度快多了，很开心</p>
<p>最近想做下面两件事情</p>
<ol>
<li>制作三键键盘（Ctrl、C、V），可惜焊接电容的时候总是焊短路，失去耐心，不了了之。</li>
<li>树莓派zero超级强化版（当你把新手初始武器 强化+13.jpg），建模基本做好了得，但是关于风扇的放入以及电源管理都还没设计完善，只能再缓一缓，未来可能会把亚克力切割换成3D打印，用嘉立创的服务更加方便，而且一体的更稳定，就是尺寸要求可能会更高。</li>
</ol>
<p>她的现在和可能未来
<img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/8266openlight-pi_now.jpg" alt="Web Image">
<img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/8266openlight-now_model.jpg" alt="Web Image"></p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/8266openlight-now_future_maybe.PNG" alt="Web Image"></p>
<p>等我啥时候心血来潮再给这个项目结个尾，下次一定下次一定。</p>
<p>这一次做的就是我一直以来想做的远程桌面，在我iPad到手前我就已经开始着手布置了，从开始13号到结束20号整整忙了一周，每天都只有中午休息的时候才有时间弄一弄，弄完的第一时间也是及时的来更新了，所以这次的内容非常丰富。</p>
<h2 id="开启远程桌面">开启远程桌面</h2>
<p>开启远程桌面的前置条件，Windows专业版，正好最近Windows11搞得沸沸扬扬的，我就想着反正也是来都来了，整个Windows11玩玩，然后稀里糊涂的开了&rsquo;Windows预览体验计划&rsquo;，不过不得不说不愧是预览版，她从根源上杜绝了蓝屏现象，预览版改绿屏了。一个网卡驱动的bug折磨的我死去活来，好在我出问题的一天后微软就发布了新补丁，修复了这个问题，但我的电脑甚至不能撑到Windows更新完，最后还是把版本退了回去，并关了自动更新，等到下一个正式版再退出这个体验计划，只能说好奇心害死猫。</p>
<p>好像升级到Windows11对于我来说没有什么太大的意义，不过好歹也算升级到了专业版，可以非常轻松的在设置中打开远程桌面功能。</p>
<p>开启之后在防火墙中开启入站规则中的tcp和ucp协议允许3389端口通过，或者方便一点直接允许远程桌面软件通过。</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-windows_firewall.png" alt="Web Image"></p>
<p>或者这儿</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-windows_firewall_simple.png" alt="Web Image"></p>
<p>至此，远程桌面就配置完成了，可以先用内网的设备连接试一试，能连接上就算配置成功。</p>
<h2 id="ipv6获取">IPv6获取</h2>
<p>移动好像是给所有都分配了IPv6，没有公网IPv4就弄公网IPv6，公网IPv6是给所有设备都能分配上，未来做其他事情会更加方便，买个域名，配上ddns，及其方便。</p>
<h3 id="光猫桥接">光猫桥接</h3>
<p>移动是分配了IPv6，但是不给桥接，四舍五入还是没有，我去反映情况，第一天打电话，第三天发短信回复正在处理，第四天打电话说正在处理，第五天告诉我解决不了，拳头硬了</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-tmd.jpg" alt="Web Image"></p>
<p>最后我只能自己去找淘宝商家解决，花钱省事儿了属于是，就是那个小哥手挺贱，把我保存的浏览记录和密码什么的都删了，tnnd，小手不干净。</p>
<h3 id="ipv6-配置">IPv6 配置</h3>
<p>之后进入我的路由器设置，将IPv6模式设置成Native，DNS设置为</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">2400:3200::1
</span></span><span class="line"><span class="cl">2400:3200:baba::1
</span></span></code></pre></div><p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-ipv6_set.png" alt="Web Image"></p>
<p>阿里云的DNS，我的域名也是阿里云的，到时候也许用起来会方便一点？大概</p>
<h3 id="测试">测试</h3>
<p>这个时候电脑大概就有IPv6地址了，进cmd</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ipconfig
</span></span></code></pre></div><p>一下，看一下此时的IPv6地址，如果是240开头的，各个运营商都不一样，比如我用的移动的就是2409，这就是公网IPv6了，如果是fe80的，那就还是内网，之后在到<a href="http://test.ipv6.fastweb.it/">IPv6测试网站</a>测试一下，看一下是否是同一个，如果没有问题的话，那就没有什么问题了，有问题的话我这里也没有办法，我不是教程，我只是一个日记，别找我。</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-ipconfig.png" alt="Web Image">
<img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-test_ipv6.png" alt="Web Image"></p>
<h2 id="路由器防火墙">路由器防火墙</h2>
<p>小米路由器没有防火墙设置真是**，其他路由器都有的功能，小米就是不加，就和其他运行商都可以，唯独移动不行一样，得自己手动来。这里插句题外话，本来是打算刷个openwrt方便管理，但是刷完了从千兆变成了三伯兆，花了一两天也没解决，还是刷了回去，博客也懒得写了，浅贴一个链接。</p>
<h3 id="开启ssh">开启ssh</h3>
<p>我这里使用的是<a href="https://github.com/acecilia/OpenWRTInvasion">acecilia/OpenWRTInvasion</a>工具，操作简单，无副作用，流程极短，我这里也不做教程，反正就是</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">python3</span> <span class="n">remote_command_execution_vulnerability</span><span class="o">.</span><span class="n">py</span>
</span></span></code></pre></div><p>根据提示输入路由器地址，密码，选择包的获取方式（0.07还是0.08已经不用必须GitHub下载了，可以选择本地包），开始操作</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-telnet_preparatory.png" alt="Web Image"></p>
<p>操作完直接telnet就完事儿了</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">telnet miwifi.com
</span></span></code></pre></div><p>账号密码默认root，进入就可以看到大大的&rsquo;Are You OK'</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-AreYouOK.png" alt="Web Image"></p>
<h3 id="关闭ipv6防火墙">关闭IPv6防火墙</h3>
<p>输入以下指令</p>
<p>&lsquo;&lsquo;&lsquo;bash
vi /etc/rc.local
&rsquo;&rsquo;&rsquo;</p>
<p>在里面加入</p>
<p>&lsquo;&lsquo;&lsquo;vim
speed=$(uci -q get xiaoqiang.common.WAN_SPEED)
[ -n &ldquo;$speed&rdquo; ] &amp;&amp; /usr/sbin/phyhelper swan &ldquo;$speed&rdquo;
ip6tables -I forwarding_rule -p tcp &ndash;dport 3389 -j ACCEPT
ip6tables -I forwarding_rule -p udp &ndash;dport 3389 -j ACCEPT
&rsquo;&rsquo;&rsquo;</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-router_firewall.png" alt="Web Image"></p>
<p>保存后输入指令&rsquo;reboot&rsquo;回车执行后重启路由器</p>
<p>或者更绝一些（不推荐）
逐条输入以下指令</p>
<p>&lsquo;&lsquo;&lsquo;bash
ip6tables -F
ip6tables -X
ip6tables -P INPUT ACCEPT
ip6tables -P OUTPUT ACCEPT
ip6tables -P FORWARD ACCEPT
&rsquo;&rsquo;&rsquo;</p>
<p>这样就完全不用烦防火墙了以后</p>
<h2 id="ddns">ddns</h2>
<p>此时已经可以使用上面那个获取到的IPv6进行公网访问了，但是那个毕竟会变，再加上IPv6毕竟不是IPv4，实在是不好记，那我们就需要ddns服务</p>
<p>首先还是买一个域名，直接用之前的域名也可以，不过反正便宜，我就想着一种用途买一个，未来好分配整理</p>
<p>进入域名管理界面，先把记录类型改成AAAA，解析IPv6地址，后面记录值先随便填比如&rsquo;fe80::&rsquo;</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-analysis_success.png" alt="Web Image"></p>
<p>我这里用的也是一个小工具<a href="https://github.com/NewFuture/DDNS">NewFuture/DDNS</a></p>
<p>先双击ddns.exe，软件会生成一个配置文件，填写，我的配置如下</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/IPv6_RD-ddns_config.png" alt="Web Image"></p>
<p>配置完，再次启动ddns.exe就完成了，用管理员打开create-task.bat会创建一个任务，定时ddns。</p>
<p>再次查看，会发现域名解析已经完成，至此远程桌面准备工作已经全部完成，之后就可以愉悦连接了。</p>
<h2 id="愉悦连接">愉悦连接</h2>
<p>此时，用新买的域名就可以登录，大功告成。</p>
<h2 id="ftp">FTP</h2>
<p>来都来了，想整个FTP服务器方便iPad访问电脑文件，但是其他都太麻烦了，所以就先用FTP凑活一下，未来再整NAS（此处先留坑），所以这部分也凑活一下</p>
<h3 id="windows开启iis服务">Windows开启IIS服务</h3>
<p>rt</p>
<h3 id="开启ftp防火墙">开启FTP防火墙</h3>
<p>方法如上</p>
<h3 id="连接使用">连接使用</h3>
<p>iPad下载ES文件管理器，连接FTP</p>
<h2 id="参考链接">参考链接</h2>
<ul>
<li>
<p><a href="https://www.bilibili.com/video/BV1wg411A7Lc/">【教程】无需内网穿透，使用手机在公网通过IPv6远程控制Windows电脑</a></p>
</li>
<li>
<p><a href="https://www.bilibili.com/video/BV1fL411j7U7">【教程】在Windows上配置IPv6 DDNS</a></p>
</li>
<li>
<p><a href="https://www.bilibili.com/video/BV1Lb4y1o7SF">【mc开服】教你白嫖运营商公网ipv6跟好兄弟联机</a></p>
</li>
<li>
<p><a href="https://post.smzdm.com/p/a5oegewk/">好玩又有趣的网络 篇九：五一假期在即，继续宅家搞机——解除小米路由器的IPV6限制，无公网进行内网穿透（小白向保姆级教程）</a></p>
</li>
<li>
<p><a href="https://www.right.com.cn/FORUM/forum.php?mod=viewthread&amp;tid=6074185&amp;page=1&amp;ivk_sa=1024320u">[R4A] [2022-07-12]小米路由器4A千兆版(R4A)刷openwrt官方固件</a></p>
</li>
</ul>
</div>
                    <div class="post_footer">
                        
                    </div>
                </div>
                
                
                <div class="doc_comments"></div>
                
            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span>记录</span>
    </div>
</footer>
    <script src="https://FDXN.github.io/js/jquery-3.5.1.min.js"></script>
<link href="https://FDXN.github.io/css/fancybox.min.css" rel="stylesheet">
<script src="https://FDXN.github.io/js/fancybox.min.js"></script>
<script src="https://FDXN.github.io/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>



</body>

</html>