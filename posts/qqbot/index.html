<!DOCTYPE html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="FDXN" />
	
	<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests" />
	
	
	
	<title>ä½¿ç”¨Go-cqhttpå’ŒNoneBot2æ­å»ºå‡ºå±äºè‡ªå·±çš„QQæœºå™¨äºº ï½œ é»„ç²±ä¸€æ¢¦</title>
	
    
    
    <meta name="description" content="æœ¬ç¯‡å±äºä¸€ä¸ªè¡¥æ¡£ï¼Œæ¯•ç«Ÿè¡¥æ¡£æ˜¯æ£€éªŒå¥½æ´»çš„å”¯ä¸€æ ‡å‡†ã€‚ ä¸€å¼€å§‹æˆ‘ä¸ºä»€ä¹ˆè¦å¼„è¿™ä¸ªQQæœºå™¨äººå·²ç»ä¸è®°å¾—äº†ï¼Œä½†æ˜¯å½“æ—¶åšçš„æ—¶å€™ä¸€ä¸‹å­å°±æˆåŠŸäº†ï¼Œå¾ˆæ„å¤–ï¼Œè€Œä¸”å¤§æ¦‚æ˜¯æŸä¸ªå‡æœŸå›å®¶çš„è·¯ä¸Šå¼„çš„ï¼Œå¼„å®Œåé‚£ä¸ªå‡æœŸå°±å•¥ä¹Ÿæ²¡å¹²äº†ï¼Œæ‰€ä»¥" />
    

    

	
    
    <link rel="shortcut icon" href="https://FDXN.github.io/images/favicon.ico" />

    <link rel="stylesheet" type="text/css" media="screen" href="https://FDXN.github.iocss/normalize.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://FDXN.github.io/css/zozo.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="https://FDXN.github.io/css/highlight.css" />

    
    
</head>



<head><style type="text/css">:root {
    --nav-width: 1380px;
    --article-width: 650px;
    --toc-width: 300px;
}

.toc {
    margin: 0 2px 40px 2px;
    border: 1px solid var(--border);
    background: var(--entry);
    border-radius: var(--radius);
    padding: 0.4em;
}

.toc-container.wide {
    position: absolute;
    height: 100%;
    border-right: 1px solid var(--border);
    left: calc((var(--toc-width) + var(--gap)) * -1);
    top: calc(var(--gap) * 2);
    width: var(--toc-width);
}

.wide .toc {
    position: sticky;
    top: var(--gap);
    border: unset;
    background: unset;
    border-radius: unset;
    width: 100%;
    margin: 0 2px 40px 2px;
}

.toc details summary {
    cursor: zoom-in;
    margin-inline-start: 20px;
    padding: 12px 0;
}

.toc details[open] summary {
    font-weight: 500;
}

.toc-container.wide .toc .inner {
    margin: 0;
}

.active {
    font-size: 110%;
    font-weight: 600;
}

.toc ul {
    list-style-type: circle;
}

.toc .inner {
    margin: 0 0 0 20px;
    padding: 0px 15px 15px 20px;
    font-size: 16px;
}

.toc li ul {
    margin-inline-start: calc(var(--gap) * 0.5);
    list-style-type: none;
}

.toc li {
    list-style: none;
    font-size: 0.95rem;
    padding-bottom: 5px;
}

.toc li a:hover {
    color: var(--secondary);
}
</style></head>


<div style="position: fixed; right:10px;max-width:600px; overflow:auto; top: 100px; width: 20vw; bottom:30px">
<aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details >
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">ç›®å½•</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#go-cqhttp-%e9%85%8d%e7%bd%ae1%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="Go-cqhttp é…ç½®$^{[1]}$">Go-cqhttp é…ç½®<a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">$^{[1]}$</a></a><ul>
                            
                    <li>
                        <a href="#%e4%b8%8b%e8%bd%bd%e8%a7%a3%e5%8e%8b" aria-label="ä¸‹è½½è§£å‹">ä¸‹è½½è§£å‹</a></li>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae%e4%bd%bf%e7%94%a8" aria-label="é…ç½®ä½¿ç”¨">é…ç½®ä½¿ç”¨</a></li></ul>
                    </li>
                    <li>
                        <a href="#nonebot2-%e9%85%8d%e7%bd%ae2%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="NoneBot2 é…ç½®$^{[2]}$">NoneBot2 é…ç½®<a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">$^{[2]}$</a></a><ul>
                            
                    <li>
                        <a href="#%e5%ae%89%e8%a3%85-nonebot2" aria-label="å®‰è£… NoneBot2">å®‰è£… NoneBot2</a></li>
                    <li>
                        <a href="#%e4%bd%bf%e7%94%a8" aria-label="ä½¿ç”¨">ä½¿ç”¨</a></li>
                    <li>
                        <a href="#%e9%85%8d%e7%bd%ae" aria-label="é…ç½®">é…ç½®</a><ul>
                            
                    <li>
                        <a href="#env%e6%96%87%e4%bb%b6" aria-label="envæ–‡ä»¶">envæ–‡ä»¶</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e8%bf%90%e8%a1%8c" aria-label="è¿è¡Œ">è¿è¡Œ</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%88%9b%e5%bb%batmux%e7%aa%97%e5%8f%a3%e5%8f%8c%e5%bc%803%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="åˆ›å»ºTmuxçª—å£åŒå¼€$^{[3]}$">åˆ›å»ºTmuxçª—å£åŒå¼€<a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">$^{[3]}$</a></a></li>
                    <li>
                        <a href="#%e5%bc%80%e5%a7%8b%e4%bd%bf%e7%94%a8" aria-label="å¼€å§‹ä½¿ç”¨">å¼€å§‹ä½¿ç”¨</a><ul>
                            
                    <li>
                        <a href="#%e4%ba%ba%e7%b1%bb%e7%9a%84%e6%9c%ac%e8%b4%a8%e6%98%af%e5%a4%8d%e8%af%bb%e6%9c%ba%e9%82%a3%e6%9c%ba%e5%99%a8%e4%ba%ba%e4%b9%9f%e5%be%97%e6%98%af" aria-label="äººç±»çš„æœ¬è´¨æ˜¯å¤è¯»æœºï¼Œé‚£æœºå™¨äººä¹Ÿå¾—æ˜¯">äººç±»çš„æœ¬è´¨æ˜¯å¤è¯»æœºï¼Œé‚£æœºå™¨äººä¹Ÿå¾—æ˜¯</a></li>
                    <li>
                        <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%8f%8d%e5%ba%94" aria-label="è‡ªå®šä¹‰ååº”">è‡ªå®šä¹‰ååº”</a></li>
                    <li>
                        <a href="#%e6%8b%bf%e6%9d%a5%e4%b8%bb%e4%b9%89" aria-label="æ‹¿æ¥ä¸»ä¹‰">æ‹¿æ¥ä¸»ä¹‰</a></li>
                    <li>
                        <a href="#%e6%9b%b4%e5%a4%9a%e5%8a%9f%e8%83%bd" aria-label="æ›´å¤šåŠŸèƒ½">æ›´å¤šåŠŸèƒ½</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5" aria-label="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

</div>



<body>
    <div class="main animate__animated animate__fadeInDown">
        <div class="nav_container animated fadeInDown">
    <div class="site_nav" id="site_nav">
        <ul>
            
            <li>
                <a href="/">Home</a>
            </li>
            
            <li>
                <a href="/posts/">Archive</a>
            </li>
            
            <li>
                <a href="/tags/">Tags</a>
            </li>
            
            <li>
                <a href="/about/">About</a>
            </li>
            
        </ul>
    </div>
    <div class="menu_icon">
        <a id="menu_icon"><i class="ri-menu-line"></i></a>
    </div>
</div>
        <div class="header animated fadeInDown">
    <div class="site_title_container">
        <div class="site_title">
            <h1>
                <a href="https://FDXN.github.io">
                    <span>é»„ç²±ä¸€æ¢¦</span>
                </a>
            </h1>
        </div>
        <div class="description">
            <p class="sub_title">æ­£å› æ˜¯æ¢¦ï¼Œå°¤éœ€çœŸæ´»ã€‚</p>
            <div class="my_socials">
                
                
                <a href="https://space.bilibili.com/8346968" title="bilibili" target="_blank"><i class="ri-bilibili-fill"></i></a>
                
                
                
                <a href="https://github.com/FDXN" title="github" target="_blank"><i class="ri-github-fill"></i></a>
                
                
                
                <a href="http://wpa.qq.com/msgrd?v=3&amp;uin=1005279543&amp;site=qq&amp;menu=yes" title="qq" target="_blank"><i class="ri-qq-fill"></i></a>
                
                
                <a href="https://FDXN.github.io/index.xml" type="application/rss+xml" title="rss" target="_blank"><i
                        class="ri-rss-fill"></i></a>
            </div>
        </div>
    </div>
</div>
        <div class="content">
            <div class="post_page">
                <div class="post animate__animated animate__fadeInDown">
                    <div class="post_title post_detail_title">
                        <h2><a href='/posts/qqbot/'>ä½¿ç”¨Go-cqhttpå’ŒNoneBot2æ­å»ºå‡ºå±äºè‡ªå·±çš„QQæœºå™¨äºº</a></h2>
                        <span class="date">2022.11.25</span>
                    </div>
                    <div class="post_content markdown"><blockquote>
<p>æœ¬ç¯‡å±äºä¸€ä¸ªè¡¥æ¡£ï¼Œæ¯•ç«Ÿè¡¥æ¡£æ˜¯æ£€éªŒå¥½æ´»çš„å”¯ä¸€æ ‡å‡†ã€‚</p>
</blockquote>
<p>ä¸€å¼€å§‹æˆ‘ä¸ºä»€ä¹ˆè¦å¼„è¿™ä¸ªQQæœºå™¨äººå·²ç»ä¸è®°å¾—äº†ï¼Œä½†æ˜¯å½“æ—¶åšçš„æ—¶å€™ä¸€ä¸‹å­å°±æˆåŠŸäº†ï¼Œå¾ˆæ„å¤–ï¼Œè€Œä¸”å¤§æ¦‚æ˜¯æŸä¸ªå‡æœŸå›å®¶çš„è·¯ä¸Šå¼„çš„ï¼Œå¼„å®Œåé‚£ä¸ªå‡æœŸå°±å•¥ä¹Ÿæ²¡å¹²äº†ï¼Œæ‰€ä»¥å½“æ—¶ä¹Ÿæ²¡è®°å½•ä¸‹æ¥ï¼Œå¯¼è‡´è¿™æ¬¡æˆ‘æƒ³åœ¨æˆ‘å®¿èˆæœºé¡¶ç›’ä¸Šé‡å¼„ä¸€ä¸ªéƒ½å¾—ä»å¤´å¼€å§‹ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦åœ¨å®¿èˆæœºé¡¶ç›’å‘¢ï¼Œå°±æ˜¯å•çº¯æœ‰è¿™ä¸ªä¸œè¥¿æ‰€ä»¥æ‰æœ‰è¿™ä»½å²—ä½ï¼Œè¿™ä¸ªæ˜¯å¯ä»¥æŒ‚è½½åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„ï¼Œè€Œä¸”æ›´åŠ ç¨³å®šï¼Œä½†æ˜¯æœ€è¿‘æŒ‚è½½åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„è´¦å·ç™»é™†ä¸ä¸Šå»ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å¤„ç†ï¼Œå¹²è„†åœ¨å®¿èˆå¼„ä¸€ä¸ªï¼Œå¯ä»¥æ‰«ç ç™»å½•ã€‚</p>
<p>è¿™æ¬¡è®°ä¸‹æ¥çš„åŸå› ä¹Ÿæ˜¯ä¸ºäº†æœªæ¥åœ¨åšçš„æ—¶å€™ä¸ç”¨æ¥å›ç¿»é˜…å¤šä¸ªæ–‡æ¡£ï¼Œæ‰€ä»¥è¿™ä¸ªæ–‡æ¡£åªæ˜¯ä¸¤ç¯‡æ–‡æ¡£çš„æ•´åˆï¼Œæˆªå–äº†è¾ƒä½é™åº¦çš„å†…å®¹ï¼Œä½†è¶³ä»¥ä¿è¯å…¶è¿è¡Œï¼Œä¹Ÿåªèƒ½ä¿è¯å…¶èƒ½è¿è¡Œï¼Œæ›´å¤šæ›´è¯¦ç»†è¿˜æ˜¯å¾—è‡ªå·±å»çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæ–‡ä¸­è¯¸å¤šåœ°æ–¹ä¹Ÿä¸å¤Ÿè§„èŒƒï¼Œéç§‘ç­å‡ºèº«ï¼Œæœ›è§è°…ã€‚</p>
<h2 id="go-cqhttp-é…ç½®1å‚è€ƒé“¾æ¥">Go-cqhttp é…ç½®<a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">$^{[1]}$</a></h2>
<h3 id="ä¸‹è½½è§£å‹">ä¸‹è½½è§£å‹</h3>
<p>å…ˆ<a href="https://github.com/Mrs4s/go-cqhttp/releases">ä»è¿™å„¿ä¸‹è½½</a>æœ€æ–°ç‰ˆæœ¬çš„ go-cqhttpï¼Œè¾“å…¥<code>tar -xzvf [æ–‡ä»¶å]</code>è§£å‹</p>
<h3 id="é…ç½®ä½¿ç”¨">é…ç½®ä½¿ç”¨</h3>
<ol>
<li>
<p>è¾“å…¥<code>./go-cqhttp</code>ï¼Œç›´æ¥è¿è¡Œï¼Œè¿™æ—¶ä¼šæ˜¾ç¤º</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">æœªæ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼Œæ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆé…ç½®æ–‡ä»¶ä¸­ï¼
è¯·é€‰æ‹©ä½ éœ€è¦çš„é€šä¿¡æ–¹å¼:
&gt; 0: HTTPé€šä¿¡
&gt; 1: äº‘å‡½æ•°æœåŠ¡
&gt; 2: æ­£å‘ Websocket é€šä¿¡
&gt; 3: åå‘ Websocket é€šä¿¡
è¯·è¾“å…¥ä½ éœ€è¦çš„ç¼–å·(0-9)ï¼Œå¯è¾“å…¥å¤šä¸ªï¼ŒåŒä¸€ç¼–å·ä¹Ÿå¯è¾“å…¥å¤šä¸ª(å¦‚: 233)
æ‚¨çš„é€‰æ‹©æ˜¯:
</code></pre></div><p>å¦‚æœæ— æ³•è¿è¡Œå¯èƒ½è¿˜è¦åŠ ä¸€ä¸ªæƒé™</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">chmod <span class="m">777</span> go-cqhttp
</code></pre></div></li>
<li>
<p>æˆ‘ä»¬è¿™é‡Œé€‰æ‹©<code>3</code>åå‘ä»£ç†ï¼Œæ­¤æ—¶æ˜¾ç¤º</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">é»˜è®¤é…ç½®æ–‡ä»¶å·²ç”Ÿæˆï¼Œè¯·ä¿®æ”¹ config.yml åé‡æ–°å¯åŠ¨!
</code></pre></div></li>
<li>
<p>å‚ç…§ <a href="https://github.com/Mrs4s/go-cqhttp/blob/master/docs/config.md">config.md</a>åœ¨<code>config.yml</code>ä¸­å¡«å…¥å‚æ•°</p>
<p>å…¶ä¸­ä¸¤å¤„éœ€è¦ä¿®æ”¹</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">account: # è´¦å·ç›¸å…³
    uin: 123456 # QQè´¦å·

... ...

- ws-reverse:
    # åå‘WS Universal åœ°å€
    # æ³¨æ„ è®¾ç½®äº†æ­¤é¡¹åœ°å€åä¸‹é¢ä¸¤é¡¹å°†ä¼šè¢«å¿½ç•¥
    universal: ws://127.0.0.1:6606/onebot/v11/
</code></pre></div><p>å…¶ä¸­ï¼Œ<code>127.0.0.1</code> å’Œ <code>6606</code> åˆ†åˆ«å¯¹åº”ä¸‹æ–¹ NoneBot é…ç½®çš„ <code>HOST</code>å’Œ<code>PORT</code> <a href="#env%E6%96%87%E4%BB%B6">$^{*}$</a>ã€‚</p>
</li>
<li>
<p>å†æ¬¡è¿è¡Œï¼Œè¿™ä¸€æ­¥åˆ°æ­¤ä¸ºæ­¢</p>
<p>è‹¥å‡ºç°ä¸‹è¿°æ–‡å­—ä¸ºæ­£å¸¸è¿è¡Œï¼Œç›´æ¥è¿›è¡Œä¸‹ä¸€æ­¥</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">[WARNING]: è¿æ¥åˆ°åå‘WebSocket UniversalæœåŠ¡å™¨ ws://127.0.0.1:6606/onebot/v11/ æ—¶å‡ºç°é”™è¯¯: dial tcp 127.0.0.1:6606: connect: connection refused
</code></pre></div></li>
</ol>
<h2 id="nonebot2-é…ç½®2å‚è€ƒé“¾æ¥">NoneBot2 é…ç½®<a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">$^{[2]}$</a></h2>
<h3 id="å®‰è£…-nonebot2">å®‰è£… NoneBot2</h3>
<blockquote>
<p>è¯·ç¡®ä¿ä½ çš„ Python ç‰ˆæœ¬ &gt;= 3.8ã€‚</p>
</blockquote>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">pip install nb-cli
</code></pre></div><h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># ç›´æ¥ä½¿ç”¨ nb å‘½ä»¤</span>
nb
<span class="c1"># æˆ–ä½¿ç”¨ Python æ‰§è¡Œ module</span>
python -m nb_cli

é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨ nb å‘½ä»¤ï¼Œä½†å¦‚æœå‘½ä»¤è¡Œå‡ºç° Command not found é”™è¯¯ï¼Œè¿™æ˜¯ç”±äºç¯å¢ƒå˜é‡ PATH æ²¡æœ‰æ­£ç¡®é…ç½®æˆ–æœªé…ç½®å¯¼è‡´çš„ï¼Œå¯ä»¥ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ä»£æ›¿ã€‚
</code></pre></div><p>æˆ‘å°±æ˜¯å½“æ—¶ä¸€ç›´ä¸èƒ½ä½¿ç”¨<code>nb</code>å‘½ä»¤ï¼Œåæ¥å‘ç°æ–‡æ¡£é‡Œå†™äº†ï¼Œæ‰€ä»¥å…„å¼Ÿä»¬å¥½å¥½çœ‹æ–‡æ¡£å•Šï¼</p>
<p>åœ¨é‚£ä¸ªäº¤äº’ç•Œé¢ä¸­é€‰æ‹©create</p>
<p>ä¸€è·¯å¡«å†™æœºå™¨äººå«å•¥ï¼Œå­˜æ”¾æ’ä»¶çš„æ–‡ä»¶å¤¹å«å•¥ï¼Œä½¿ç”¨çš„æ¡†æ¶ï¼Œé€‰æ‹©onebot</p>
<p><em><strong>ï¼ï¼ï¼è¿™é‡Œé€‰æ¡†æ¶çš„æ—¶å€™è¦æŒ‰ä¸€ä¸‹ç©ºæ ¼ï¼ï¼ï¼</strong></em></p>
<p>è‡ªåŠ¨ç”Ÿæˆç›®å½•ç»“æ„ï¼Œè¯¦ç»†çœ‹æ–‡æ¡£</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">ğŸ“¦ haoqi
â”œâ”€â”€ ğŸ“‚ haoqi               # æˆ–æ˜¯ src
â”‚   â””â”€â”€ ğŸ“œ plugins
â”œâ”€â”€ ğŸ“œ .env                # å¯é€‰çš„
â”œâ”€â”€ ğŸ“œ .env.dev            # å¯é€‰çš„
â”œâ”€â”€ ğŸ“œ .env.prod           # å¯é€‰çš„
â”œâ”€â”€ ğŸ“œ .gitignore
â”œâ”€â”€ ğŸ“œ bot.py
â”œâ”€â”€ ğŸ“œ docker-compose.yml
â”œâ”€â”€ ğŸ“œ Dockerfile
â”œâ”€â”€ ğŸ“œ pyproject.toml
â””â”€â”€ ğŸ“œ README.md
</code></pre></div><p><code>HaoQi/plugins</code> æˆ– <code>src/plugins</code>: ç”¨äºå­˜æ”¾ç¼–å†™çš„ bot æ’ä»¶
<code>.env</code>ã€<code>.env.dev</code>ã€<code>.env.prod</code>: å„ç¯å¢ƒé…ç½®æ–‡ä»¶
<code>bot.py</code>: bot å…¥å£æ–‡ä»¶
<code>pyproject.toml</code>: é¡¹ç›®æ’ä»¶é…ç½®æ–‡ä»¶
<code>Dockerfile</code>ã€<code>docker-compose.yml</code>: Docker é•œåƒé…ç½®æ–‡ä»¶</p>
<h3 id="é…ç½®">é…ç½®</h3>
<h4 id="envæ–‡ä»¶">envæ–‡ä»¶</h4>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">HOST=127.0.0.1        # é…ç½® NoneBot2 ç›‘å¬çš„ IP/ä¸»æœºå
PORT=6606             # é…ç½® NoneBot2 ç›‘å¬çš„ç«¯å£
LOG_LEVEL=DEBUG
FASTAPI_RELOAD=true
</code></pre></div><p>æ­¤å¤„<code>HOST</code>å’Œ<code>PORT</code>å³å¯¹åº”ä¸Šæ–¹ Go-cqhttp é…ç½®çš„ <code>config.yml</code> <a href="#%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8">$^{*}$</a>ä¸­çš„<code>HOST</code>å’Œ<code>PORT</code>ã€‚</p>
<h3 id="è¿è¡Œ">è¿è¡Œ</h3>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">nb run
</code></pre></div><p>ä¸‹é¢è¯´çš„å’±ä¹Ÿæ²¡çœ‹æ‡‚ï¼Œåæ­£å°±ç”¨<code>nb run</code>æ€»ä¸ä¼šå‡ºé—®é¢˜</p>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">Always use `nb run` to start the bot instead of manually running!
</code></pre></div><h2 id="åˆ›å»ºtmuxçª—å£åŒå¼€3å‚è€ƒé“¾æ¥">åˆ›å»ºTmuxçª—å£åŒå¼€<a href="#%E5%8F%82%E8%80%83%E9%93%BE%E6%8E%A5">$^{[3]}$</a></h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">tmux new -s qqbot    <span class="c1"># æ–°å»ºä¼šè¯</span>
Ctrl+b %             <span class="c1"># åˆ’åˆ†å·¦å³ä¸¤ä¸ªçª—æ ¼</span>
Ctrl+b &lt;arrow key&gt;   <span class="c1"># æ–¹å‘é”®å·¦å³ï¼Œå°†å…‰æ ‡åˆ‡æ¢åˆ°å…¶ä»–çª—æ ¼</span>
tmux attach -t qqbot <span class="c1"># ä¸‹æ¬¡ä½¿ç”¨æ—¶å†æ¬¡æ¥å…¥ä¼šè¯</span>
</code></pre></div><p>åœ¨ä¸¤ä¸ªçª—å£åˆ†åˆ«è¿è¡Œ<code>Go-cqhttp</code>å’Œ<code>NoneBot2</code>ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/qqbot-success.png" alt="Web Image"></p>
<h2 id="å¼€å§‹ä½¿ç”¨">å¼€å§‹ä½¿ç”¨</h2>
<h3 id="äººç±»çš„æœ¬è´¨æ˜¯å¤è¯»æœºé‚£æœºå™¨äººä¹Ÿå¾—æ˜¯">äººç±»çš„æœ¬è´¨æ˜¯å¤è¯»æœºï¼Œé‚£æœºå™¨äººä¹Ÿå¾—æ˜¯</h3>
<p>ç¼–è¾‘ä¸€ä¸‹<code>bot.py</code>æ–‡ä»¶</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># -*- coding: utf-8 -*-</span>

<span class="kn">import</span> <span class="nn">nonebot</span>
<span class="kn">from</span> <span class="nn">nonebot.adapters.onebot.v11</span> <span class="kn">import</span> <span class="n">Adapter</span> <span class="k">as</span> <span class="n">ONEBOT_V11Adapter</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">nonebot</span><span class="o">.</span><span class="n">get_asgi</span><span class="p">()</span>

<span class="n">driver</span> <span class="o">=</span> <span class="n">nonebot</span><span class="o">.</span><span class="n">get_driver</span><span class="p">()</span>
<span class="n">driver</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="n">ONEBOT_V11Adapter</span><span class="p">)</span>

<span class="n">nonebot</span><span class="o">.</span><span class="n">load_builtin_plugins</span><span class="p">(</span><span class="s2">&#34;echo&#34;</span><span class="p">)</span>

<span class="n">nonebot</span><span class="o">.</span><span class="n">load_from_toml</span><span class="p">(</span><span class="s2">&#34;pyproject.toml&#34;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="n">nonebot</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&#34;Always use `nb run` to start the bot instead of manually running!&#34;</span><span class="p">)</span>
    <span class="n">nonebot</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="s2">&#34;__mp_main__:app&#34;</span><span class="p">)</span>
</code></pre></div><p>ä»¥ä¸Šå°±æ˜¯æœ€ç®€å•çš„åŠ äº†å¤è¯»æœºæ’ä»¶çš„æœºå™¨äººï¼Œè¿™ä¸ªæœ€ç®€å•çš„åŠŸèƒ½ä¹Ÿæ˜¯è¦åŠ æ’ä»¶çš„ï¼Œä¸ç„¶å°±ä¼šåƒæˆ‘ä¸€æ ·ï¼Œåƒä¸ªå°ä¸‘ä¸€æ ·</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/qqbot-respond.png" alt="Web Image"></p>
<h3 id="è‡ªå®šä¹‰ååº”">è‡ªå®šä¹‰ååº”</h3>
<p>æˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªæœ€åŸºæœ¬çš„å›åº”ï¼Œä¸èƒ½åªä¼šå¤è¯»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨pythonå†™ä¸€ä¸ªæœ€ç®€å•çš„ï¼ˆäººç”Ÿè‹¦çŸ­æˆ‘ç”¨python</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">nonebot.adapters.onebot.v11</span> <span class="kn">import</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">Event</span>
<span class="kn">from</span> <span class="nn">nonebot.plugin</span> <span class="kn">import</span> <span class="n">on_keyword</span>

<span class="n">greet</span> <span class="o">=</span> <span class="n">on_keyword</span><span class="p">([</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span><span class="s1">&#39;hello&#39;</span><span class="p">],</span> <span class="n">priority</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="nd">@greet</span><span class="o">.</span><span class="n">handle</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">bot</span><span class="p">:</span> <span class="n">Bot</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">Event</span><span class="p">):</span>
    <span class="k">await</span> <span class="n">greet</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&#34;Hello world!&#34;</span><span class="p">)</span>
</code></pre></div><p>èƒ½å¬è§ï¼Œèƒ½è¯´å‡ºï¼Œå°±è¿™ä¹ˆç®€å•</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/qqbot-greet.png" alt="Web Image"></p>
<h3 id="æ‹¿æ¥ä¸»ä¹‰">æ‹¿æ¥ä¸»ä¹‰</h3>
<p>å¯ä»¥ç›´æ¥æ‹¿æ¥å¤§ä½¬å†™å¥½çš„æ’ä»¶ï¼Œåƒé€›<a href="https://v2.nonebot.dev/store">è¶…å¸‚</a>ä¸€æ ·æŒ‘é€‰è‡ªå·±æƒ³è¦çš„åŠŸèƒ½</p>
<p><img src="https://fdxn.oss-cn-hangzhou.aliyuncs.com/image/qqbot-store.png" alt="Web Image"></p>
<h3 id="æ›´å¤šåŠŸèƒ½">æ›´å¤šåŠŸèƒ½</h3>
<p>è¿˜åœ¨å¼€å‘ä¸­ï¼Œæœªæ¥ä¼šå•ç‹¬åˆ—ä¸€ä¸ªåšå®¢å‡ºæ¥</p>
<hr>
<p>å°±æ­¤ä¸€ä¸ªæœºå™¨äººçš„æ¡†æ¶å·²ç»æ­å‡ºï¼Œåœ¨ä¸Šé¢è¿›è¡Œä¸€äº›å°æ”¹åŠ¨ï¼ŒåŠ ä¸€äº›å‡½æ•°å³å¯å®Œæˆä¸€äº›ç®€å•æ“ä½œï¼Œè¾“å…¥è¾“å‡ºÂ·Â·Â· Â·Â·Â·</p>
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li>[1] <a href="https://docs.go-cqhttp.org/">go-cqhttpæ–‡æ¡£</a></li>
<li>[2] <a href="https://v2.nonebot.dev/">Nonebotæ–‡æ¡£</a></li>
<li>[3] <a href="https://fdxn.xyz/posts/recall-copy-asf">æ›¾ç»çš„æ–‡æ¡£</a></li>
</ul>
</div>
                    <div class="post_footer">
                        
                        <div class="meta">
                            <div class="info">
                                <span class="field tags">
                                    <i class="ri-stack-line"></i>
                                    
                                    <a href="https://FDXN.github.io/tags/qqbot/">qqbot</a>
                                    
                                    <a href="https://FDXN.github.io/tags/%E8%AE%B0%E5%BD%95/">è®°å½•</a>
                                    
                                </span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                
                <div class="doc_comments"></div>
                

            </div>
        </div>
    </div>
    <a id="back_to_top" href="#" class="back_to_top"><i class="ri-arrow-up-s-line"></i></a>
    <footer class="footer">
    <div class="powered_by">
        <a href="https://varkai.com">Designed by VarKai,</a>
        <a href="http://www.gohugo.io/">Proudly published with Hugo</a>
    </div>

    <div class="footer_slogan">
        <span>è®°å½•</span>
    </div>
</footer>
    <script src="https://FDXN.github.io/js/jquery-3.5.1.min.js"></script>
<link href="https://FDXN.github.io/css/fancybox.min.css" rel="stylesheet">
<script src="https://FDXN.github.io/js/fancybox.min.js"></script>
<script src="https://FDXN.github.io/js/zozo.js"></script>


<script type="text/javascript" async
    src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\[\[', '\]\]']],
                processEscapes: true,
                processEnvironments: true,
                skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                TeX: {
                    equationNumbers: { autoNumber: "AMS" },
                    extensions: ["AMSmath.js", "AMSsymbols.js"]
                }
            }
        });

        MathJax.Hub.Queue(function () {
            
            
            
            var all = MathJax.Hub.getAllJax(), i;
            for (i = 0; i < all.length; i += 1) {
                all[i].SourceElement().parentNode.className += ' has-jax';
            }
        });
    </script>

<style>
    code.has-jax {
        font: inherit;
        font-size: 100%;
        background: inherit;
        border: inherit;
        color: #515151;
    }
</style>




</body>

</html>